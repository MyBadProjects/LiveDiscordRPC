const{remote:remote}=require("electron"),fs=require("fs"),state=document.getElementById("state"),details=document.getElementById("details"),largeImageKey=document.getElementById("largeimage"),largeImageText=document.getElementById("largeimagetext"),smallImageKey=document.getElementById("smallimage"),smallImageText=document.getElementById("smallimagetext"),clientID=document.getElementById("clientid");state.value=require("./default.json").state,details.value=require("./default.json").details,largeImageKey.value=require("./default.json").smallImageKey,largeImageText.value=require("./default.json").largeImageText,smallImageKey.value=require("./default.json").smallImageKey,smallImageText.value=require("./default.json").smallImageText,clientID.value=require("./default.json").clientID;const RPC=require("discord-rpc");var rpcMethod="ipc",rpc=new RPC.Client({transport:rpcMethod});function removeExtraSpaces(e){return e.replace(/\s{2,}/g," ").replace(/[^a-zA-Z ][^0-9 ]/g,"")}const exitBtn=document.getElementById("close");exitBtn.addEventListener("click",function(){remote.getCurrentWindow().close()});var activated=!1;const activateBtn=document.getElementById("onoffactive");activateBtn.addEventListener("click",async function(){if(activated)activated=!1,rpc.destroy(),rpc=new RPC.Client({transport:rpcMethod}),activateBtn.value="Activate RPC",activateBtn.innerText=activateBtn.value;else if(`${state.value}`.length<4||`${details.value}`.length<4||`${largeImageKey.value}`.length<4||`${largeImageText.value}`.length<4||`${smallImageKey.value}`.length<4||`${smallImageText.value}`.length<4||`${clientID.value}`.length<4)alert("You need to have atleast 4 characters (in each textbox) for the RPC to work!");else{activated=!0;var e=removeExtraSpaces(details.value),t=removeExtraSpaces(state.value),a=new Date,l=removeExtraSpaces(largeImageKey.value),n=removeExtraSpaces(largeImageText.value),r=removeExtraSpaces(smallImageKey.value),m=removeExtraSpaces(smallImageText.value),s=clientID.value;rpc.on("ready",()=>{rpc.setActivity({details:e,state:t,startTimestamp:a,largeImageKey:l,largeImageText:n,smallImageKey:r,smallImageText:m}),console.log(`Rich Prescence is on: ${rpc.user.username}`)}),rpc.login({clientId:s}),activateBtn.value="Deactivate RPC",activateBtn.innerText=activateBtn.value}});const savedefBtn=document.getElementById("savedef");savedefBtn.addEventListener("click",function(){fs.writeFileSync("./default.json",JSON.stringify({details:details2,state:state2,startTimestamp:startTimestamp2,largeImageKey:largeImageKey2,largeImageText:largeImageText2,smallImageKey:smallImageKey2,smallImageText:smallImageText2}),function(e){if(e)throw e})});const loaddefBtn=document.getElementById("loaddef");loaddefBtn.addEventListener("click",function(){state.value=require("./default.json").state,details.value=require("./default.json").details,largeImageKey.value=require("./default.json").smallImageKey,largeImageText.value=require("./default.json").largeImageText,smallImageKey.value=require("./default.json").smallImageKey,smallImageText.value=require("./default.json").smallImageText,clientID.value=require("./default.json").clientID});const resetdefBtn=document.getElementById("resetdef");var em="";resetdefBtn.addEventListener("click",function(){fs.writeFileSync("./default.json",JSON.stringify({state:em,details:em,largeImageKey:em,largeImageText:empty,smallImageKey:em,smallImageText:em,clientID:em}),function(e){if(e)throw e})})